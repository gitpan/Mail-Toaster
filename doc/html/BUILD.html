<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Mail::Toaster BUILD</title>
<link rev="made" href="mailto:root@hampsten.nonet" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#create_a_new_jail">Create a new Jail</a></li>
	<li><a href="#install_mail__toaster">Install Mail::Toaster</a></li>
	<li><a href="#build_the_programs">Build the programs</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>The Mail::Toaster lab build test</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Before turning a new version of the Mail::Toaster loose on the world, I run it through a battery of tests. The first test is simply making sure it builds properly. This document details how I perform that test. 
This is not a suggested build method. I use shortcuts (such as the perl and mysql packages) that may not work in your environment. It is here so that you may learn from it.</p>
<p>
</p>
<hr />
<h1><a name="create_a_new_jail">Create a new Jail</a></h1>
<pre>
 toaster_setup.pl -s jailadd
 sh /etc/rc
 pkg_add -r <a href="http://www.tnpi.biz/internet/mail/toaster/src/perl-5.8.5.tbz">http://www.tnpi.biz/internet/mail/toaster/src/perl-5.8.5.tbz</a></pre>
<p>
</p>
<hr />
<h1><a name="install_mail__toaster">Install Mail::Toaster</a></h1>
<pre>
 fetch <a href="http://www.tnpi.biz/internet/mail/toaster/src/Mail-Toaster-3.xx.tar.gz">http://www.tnpi.biz/internet/mail/toaster/src/Mail-Toaster-3.xx.tar.gz</a>
 tar -xzf Mail-Toaster-3.xx.tar.gz 
 cd Mail-Toaster-3.xx/
 rehash
 perl Makefile.PL 
 make install
 make newconf
 make cgi
 cp contrib/toaster-watcher.conf-testing /usr/local/etc/toaster-watcher.conf</pre>
<pre>
 vi /usr/local/etc/toaster-watcher.conf</pre>
<p>In there I modify the hostname. The testing config is basically the same as the toaster-watcher.conf but with all nearly all options enabled to make sure they'll all build.</p>
<p>
</p>
<hr />
<h1><a name="build_the_programs">Build the programs</a></h1>
<pre>
 rehash
 toaster_setup.pl -s pre</pre>
<p>&lt;much output snipped&gt;</p>
<pre>
 pkg_add -r <a href="http://www.tnpi.biz/internet/mail/toaster/src/mysql-server-4.0.18_1.tbz">http://www.tnpi.biz/internet/mail/toaster/src/mysql-server-4.0.18_1.tbz</a></pre>
<p>This isn't ``normally'' necessary but the mysql-server package on the FreeBSD package server doesn't work correctly. This one does. It's just one I build from ports and then build into a package. I only do this because it's way faster than compiling it every time.</p>
<pre>
 toaster_setup.pl -s all</pre>
<p>Much compiling and installing snipped. You'll have to answer a few questions, and wait a while. This part takes about 15 minutes on a dual 3GHz Xeon w/1GB RAM and a u320 SCSI disk.</p>
<p>When it's done, you have a mail server ready to test and tweak. Cool. :)</p>
<p>Matt</p>

</body>

</html>
