<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Qmail Queue</title>
<link rev="made" href="mailto:root@hampsten.nonet" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#install">INSTALL</a></li>
	<ul>

		<li><a href="#sample_output">Sample Output</a></li>
		<li><a href="#user_preferences">User Preferences</a></li>
		<li><a href="#message_expiration">Message Expiration</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#credits">CREDITS</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#todo">TODO</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>qqtool.pl - A tool for viewing and purging messages from a qmail queue</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Qmail Queue Tool (qqtool.pl)</p>
<p>This program will allow you to search and view messages in your qmail queue. It will also allow you to remove them, via expiration or deletion. It was written by Matt Simerson for the toaster users on <a href="mailto:mail-toaster@simerson.net">mail-toaster@simerson.net</a></p>
<p>ChangeLog - <a href="http://www.tnpi.biz/internet/mail/qqtool/changelog.shtml">http://www.tnpi.biz/internet/mail/qqtool/changelog.shtml</a></p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>
</p>
<hr />
<h1><a name="install">INSTALL</a></h1>
<p>Download Mail::Toaster from <a href="http://www.tnpi.biz/internet/mail/toaster/Mail-Toaster.tar.gz">http://www.tnpi.biz/internet/mail/toaster/Mail-Toaster.tar.gz</a></p>
<pre>
   fetch Mail-Toaster.tar.gz
   tar -xzf Mail-Toaster.tar.gz
   cd Mail-Toaster-x.xx
   perl Makefile.PL
   make install
   rehash</pre>
<p>Run the script without any parameters and it will show you a menu of options.</p>
<pre>
   qqtool.pl</pre>
<p>
</p>
<h2><a name="sample_output">Sample Output</a></h2>
<pre>
 # qqtool.pl
          Qmail Queue Tool   v 1.4
  
   -a  action (delete, expire, list)
   -h  header to match (From, To, Subject, Date)
   -q  queue to search (local/remote)
   -s  search  (pattern to search for)
   -v  verbose</pre>
<p>If no -h is specified, then the pattern is searched for in any header. If no -q is specified, then both queues are searched.</p>
<p>To list messages in queue from matt:</p>
<pre>
   ./Mail-Toaster/qqtool.pl -a list -s matt -h From</pre>
<p>To list messages in queue with string ``foo'' in the headers:</p>
<pre>
   ./Mail-Toaster/qqtool.pl -a list -s foo</pre>
<p>
</p>
<h2><a name="user_preferences">User Preferences</a></h2>
<p>There are two settings you can alter:</p>
<pre>
  $qdir is the path to your qmail queue
  $qcontrol is your qmail-send control directory</pre>
<p>If you aren't using the defaults (/var/qmail/queue, /service/send``), edit qqtool.pl and adjust those values.</p>
<p>
</p>
<h2><a name="message_expiration">Message Expiration</a></h2>
<p>Expiring messages does not remove them from the queue.  It merely alters their expiration time. The messages will be removed from the queue after qmail attempts to deliver them one last time.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Matt Simerson &lt;<a href="mailto:matt@tnpi.biz">matt@tnpi.biz</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="credits">CREDITS</a></h1>
<p>Idea based on mailRemove.py by Dru Nelson &lt;<a href="mailto:dru@redwoodsoft.com">dru@redwoodsoft.com</a>&gt;, ideas borrowed from qmHandle by Michele Beltrame &lt;<a href="mailto:mick@io.com">mick@io.com</a>&gt;</p>
<p>Community funding was contributed by the following <a href="mailto:mail-toaster@simerson.net">mail-toaster@simerson.net</a> mailing list subscribers:</p>
<pre>
 erik erik at microcontroller.nl (organizer)
 Rick Romero  rick at valeoinc.com
 Chris Eaton  Chris.Eaton at med.ge.com
 Marius Kirschner marius at agoron.com
 J. Vicente Carrasco carvay at teleline.es
 Chris Odell  chris at redstarnetworks.net
 Pat Hayes pat at pathayes.net
 Dixon Cole dixon at levee.net
 Randy Meyer rjmeyer at humbleguys.net
 kristian kristian at waveit.com
 Michael Andreasen michael at subwire.dk (beer)
 Nathan Nieblas nnieblas at microtosh.net
 Randy Jordan ctech at pcwarp.com

</pre>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Report any to author.

</p>
<p>
</p>
<hr />
<h1><a name="todo">TODO</a></h1>
<p>In list mode, when showing messages in the queue, show which addresses delivery has failed for, so you know exactly why a message is still in the queue (useful for mailing lists with many recipients)

</p>
<p>Interactive mode - step through messages offering to delete/expire/skip each

</p>
<p>Clean mode - Leave qmail down after stopping it, useful for multiple invocations

</p>
<p>Write the messages into a ``inactive'' queue before deleting them.

</p>
<p>Ability to restore messages from ``inactive'' to the real queue.

</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="http://www.tnpi.biz/internet/mail/toaster/">http://www.tnpi.biz/internet/mail/toaster/</a>

</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright 2003, Matt Simerson. All Rights Reserved.

</p>

</body>

</html>
