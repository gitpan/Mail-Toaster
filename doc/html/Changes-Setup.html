<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Mail::Toaster::Setup Changes</title>
<link rev="made" href="mailto:root@hampsten.nonet" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#3_23__11_21_2003">3.23 - 11.21.2003</a></li>
	<li><a href="#3_22__11_07_2003">3.22 - 11.07.2003</a></li>
	<li><a href="#3_21__11_06_2003">3.21 - 11.06.2003</a></li>
	<li><a href="#3_20__10_31_2003">3.20 - 10.31.2003</a></li>
	<li><a href="#3_1_1">3.1.1</a></li>
	<li><a href="#3_0_2_07_13_2003">3.0.2 07.13.2003</a></li>
	<li><a href="#3_0_1_07_10_2003">3.0.1 07.10.2003</a></li>
	<li><a href="#3_0_0_06_16_2003">3.0.0 06.16.2003</a></li>
	<li><a href="#2_7_8_05_22_2003">2.7.8 05.22.2003</a></li>
	<li><a href="#05_21_2003">05.21.2003</a></li>
	<li><a href="#2_7_6_05_12_2003">2.7.6 05.12.2003</a></li>
	<li><a href="#2_7_5_05_02_2003">2.7.5 05.02.2003</a></li>
	<li><a href="#2_7_2_04_23_03">2.7.2 04.23.03</a></li>
	<li><a href="#2_7_1_04_15_03">2.7.1 04.15.03</a></li>
	<li><a href="#2_7__04_09_2003">2.7 - 04.09.2003</a></li>
	<li><a href="#2_6_7_03_28_03">2.6.7 03.28.03</a></li>
	<li><a href="#2_6_6_03_26_03">2.6.6 03.26.03</a></li>
	<li><a href="#2_6_5_03_19_03">2.6.5 03.19.03</a></li>
	<li><a href="#2_6_4_03_13_03">2.6.4 03.13.03</a></li>
	<li><a href="#2_6_3_03_11_03">2.6.3 03.11.03</a></li>
	<li><a href="#2_6_2_03_08_03">2.6.2 03.08.03</a></li>
	<li><a href="#2_6_1_03_06_03">2.6.1 03.06.03</a></li>
	<li><a href="#2_6__03_06_2003">2.6 - 03.06.2003</a></li>
	<li><a href="#2_5__02_07_2003">2.5 - 02.07.2003</a></li>
	<li><a href="#2_2__updated_qmail__vpopmail__qmailadmin_">2.2 - Updated qmail, vpopmail, qmailadmin.</a></li>
	<li><a href="#2_1__updated_autoresponder__vpopmail__qmailadmin__and_courierimap_">2.1 - Updated autoresponder, Vpopmail, qmailadmin, and courier-imap.</a></li>
	<li><a href="#2_0__latest_versions_of_all_programs__everything_works__fun_changes_">2.0 - Latest versions of all programs, everything works, fun changes.</a></li>
	<li><a href="#1_7">1.7</a></li>
	<li><a href="#1_6">1.6</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="3_23__11_21_2003">3.23 - 11.21.2003</a></h1>
<pre>
 - Major, major reworking of the -s supervise and 
   -s maillogs install portions. They now honor oodles
   of your preferences from toaster-watcher.conf. The
   .conf file also has a bucketful of new options as
   well. You'll want to merge in the new changes.
 - removed a lot of the die calls and made them
   warnings instead.
 - Removed a lot of assumptions that the code made. Now
   that I have config settings, in know how things 
   should be and can act accordingly.
 - Whether or not service/pop3 exists will now depend
   on the pop3_daemon preference
 - Moved toaster_setup subs to Mail::Toaster::Setup.pm
 - Lots and lots of code changes due to seperation
 - Fixed a bug in ConfigVmysql where db auth settings
   weren't being set in the vmysql.h file
 - Now writes out the vpopmail.mysql file for db auth
   in vpopmail 5.3.2? and higher
 - Now writes out supervise/pop3d/run based on settings
   in toaster-watcher.conf (instead of defaults)
 - Now writes out supervise/smtp/run based on settings
   in toaster-watcher.conf (instead of defaults)
 - InstallSqwebmail - expect and deal properly with bz2
 - InstallCourier - expect and deal properly with bz2
 - deleted InstallMysql (it's in MATT::Utility::Mysql)
 - Updated qmail to use new version 2.6 patch (based on
   Bill Shupp's toaster patch</pre>
<p>
</p>
<hr />
<h1><a name="3_22__11_07_2003">3.22 - 11.07.2003</a></h1>
<pre>
 - Added SSL pem creation to the ConfigCourier sub
 - Updated the toaster installation page.</pre>
<p>
</p>
<hr />
<h1><a name="3_21__11_06_2003">3.21 - 11.06.2003</a></h1>
<pre>
 - Fixed the InstallVpopmail routine so that mysql
   values get used when pulled from watcher.conf
 - InstallFilter creates /var/log/mail/maildrop.log
   and sets ownership on it to vpopmail
 - Moved UpdatePortsTree to MATT::FreeBSD
 - Added fastest_cvsup feature to UpdatePortsTree
 - Added more settings toaster-watcher.conf to override
   default values supplied in toaster-setup.pl</pre>
<p>
</p>
<hr />
<h1><a name="3_20__10_31_2003">3.20 - 10.31.2003</a></h1>
<pre>
 - Now reads the toaster-watcher.conf file and pulls
   config values from there. Don't be surprised when
   it doesn't ask you a slew of questions any longer. :)
 - Added CVS id tag to toaster_setup.pl
 - Added perl module files and released as Perl module.
 - Updated to support qmail-scanner 1.20
 - Added MATT::Qmail dependencie (moving more code into
   MATT::Bundle for increased platform portability.</pre>
<p>
</p>
<hr />
<h1><a name="3_1_1">3.1.1</a></h1>
<pre>
 - updated dl_site to use tnpi.biz
 - added is_newer sub
 - updates to maillogs subs for increased reliability
 - mysql_install is now MUCH smarter. Should make
   things smoother for newbies
 - remove osirusoft from list of RBLs
 - removed FetchFile (get from MATT::Utility)
 - removed CdSrcDir (get from MATT::Utility)</pre>
<p>
</p>
<hr />
<h1><a name="3_0_2_07_13_2003">3.0.2 07.13.2003</a></h1>
<pre>
 - Added additional POD documentation
 - Moved InstallApache* into MATT::Apache
 - Added creating of /var/log/apache to InstallApache2
 - Additional notes for QMAILQUEUE usage for qmail-scanner
 - Moved InstallMysqlTool to MATT::Mysql
 - Moved InstallGroup and InstallUser to MATT::Passwd
 - Moved InstallPackage, CheckPortsAge, and
   InstallPort to MATT::FreeBSD
 - Moved YesOrNo, FindTheBin, SysCmd, ReadFile,
   WriteFile to MATT::Utility</pre>
<p>
</p>
<hr />
<h1><a name="3_0_1_07_10_2003">3.0.1 07.10.2003</a></h1>
<pre>
 - Fixed a permissions error with $prot/log/run files
 - Added MATT::Utility dependency, removed subs GetAnswer,
        ReadFile, WriteFile, SysCmd, FindTheBin, YesOrNo</pre>
<p>
</p>
<hr />
<h1><a name="3_0_0_06_16_2003">3.0.0 06.16.2003</a></h1>
<pre>
 - Added --enable-rebuild-tcpserver-file=n to InstallVpopmail
 - Updated vpopmail to version 5.3.20 (devel)
 - Updated qmailadmin to 1.0.21
 - Enable spam options in qmailadmin per filtering recipe
 - Added filtering page for assistance in setting up filtering</pre>
<p>
</p>
<hr />
<h1><a name="2_7_8_05_22_2003">2.7.8 05.22.2003</a></h1>
<pre>
 - Updated maillogs sub to run CreateSuperviseDirs
 - Commented out adding service/*/log/down files
   (Beginning to trend back towards using multilog)</pre>
<p>
</p>
<hr />
<h1><a name="05_21_2003">05.21.2003</a></h1>
<pre>
 - Removed mysqltool from setup page</pre>
<p>
</p>
<hr />
<h1><a name="2_7_6_05_12_2003">2.7.6 05.12.2003</a></h1>
<pre>
 - Update ucspi-tcp MySQL patch with query change submitted
   by Flavio Curti (curti@cyberlink.ch). Allows you to put
   entries for subnets in the MySQL relay table with a NULL
   timestamp and remove the necessity of putting your relay
   netblocks in a tcp.smtp.cdb file.</pre>
<p>
</p>
<hr />
<h1><a name="2_7_5_05_02_2003">2.7.5 05.02.2003</a></h1>
<pre>
 - Added InstallQmailScanner subroutine</pre>
<p>
</p>
<hr />
<h1><a name="2_7_2_04_23_03">2.7.2 04.23.03</a></h1>
<pre>
 - Fixed InstallQmailAdmin so that help files get
   installed properly on new installs
 - Updated so courier files get chmod to 755
 - InstallVpopmail now asks about qmail-extensions
 - InstallVpopmail - added =y to --enable-valias
 - InstallFilter - added clamav port install</pre>
<p>
</p>
<hr />
<h1><a name="2_7_1_04_15_03">2.7.1 04.15.03</a></h1>
<pre>
 - Fixed InstallQmail so sources get removed before rebuild.
 - Qmail-smtpd is now chowned to vpopmail if you
   are using chk-usr functions.</pre>
<p>
</p>
<hr />
<h1><a name="2_7__04_09_2003">2.7 - 04.09.2003</a></h1>
<pre>
 - Misc updates for FreeBSD 4.8
 - Added Apache2 install section
 - Apache2 also installs mod_php4 and mod_perl2
 - Install cvsup-without-gui instead of cvsup
 - Install perl5 from ports (5.6.1)</pre>
<p>
</p>
<hr />
<h1><a name="2_6_7_03_28_03">2.6.7 03.28.03</a></h1>
<pre>
 - CheckPortsAge - fixed URL for cvsup-ports file retrieval
 - Ask if password learning should be enabled
 - Ask what type of vpopmail logging is desired.
 - Ask user if domains are owned by users other than
   vpopmail. If so, run the qmail-smtpd daemon as root.
 - Updated mod_ssl to 2.8.14
 - Added domain quota question to Vpopmail interview
 - copy vlimits.h file to ~vpopmail/include/
 - fixed typo (s/answer/ans) in InstallVpopmail</pre>
<p>
</p>
<hr />
<h1><a name="2_6_6_03_26_03">2.6.6 03.26.03</a></h1>
<pre>
 - Updated vpopmail version to 5.3.19
 - Updated qmailadmin to 1.0.15</pre>
<p>
</p>
<hr />
<h1><a name="2_6_5_03_19_03">2.6.5 03.19.03</a></h1>
<pre>
 - Updated qmail-smtpd run file with ideas from LWQ
 - Changed URL for mysqltool.index.txt file</pre>
<p>
</p>
<hr />
<h1><a name="2_6_4_03_13_03">2.6.4 03.13.03</a></h1>
<pre>
 - $supervise/send/log/run how gets a working config file
 - Apache build goes a little farther, after getting input
 - Check for src earlier in qmail install</pre>
<p>
</p>
<hr />
<h1><a name="2_6_3_03_11_03">2.6.3 03.11.03</a></h1>
<pre>
  - Updated to use qmail-toaster patch 2.4
    (added qmail-smtpd-chkusr patch)</pre>
<p>
</p>
<hr />
<h1><a name="2_6_2_03_08_03">2.6.2 03.08.03</a></h1>
<pre>
 - Added interview for $service files so they don't need to
        be hand edited after install
 - Added interview for netblocks (tcp.smtp) list that you
        need to relay for.
 - Build $qmaildir/service files (smtp/run, pop3/run)
        based on user input instead of my defaults.
 - Bugfix in RemoveOldApacheSources
 - Lots of reporting added to InstallSupervise and it's
        new list of subs
 - Don't bother re-installing qmailadmin help files if they
        are already present.</pre>
<p>
</p>
<hr />
<h1><a name="2_6_1_03_06_03">2.6.1 03.06.03</a></h1>
<pre>
 - Updated qmailadmin to 1.0.12
 - Moved ChangeLog to web page</pre>
<p>
</p>
<hr />
<h1><a name="2_6__03_06_2003">2.6 - 03.06.2003</a></h1>
<pre>
  Updated qmailadmin to 1.0.12
  Complete code review and updates to toaster_setup.pl (2.6).
  Lots of overall code updates to nearly every sub (audit)
    More build time interview questions.
  Code is now more portable (for a future on other platforms)
  Ironically, there was enough duplication that despite adding
  a bunch of fresh code, the resulting script is now smaller
  Wrapped shell commands in a SysCmd sub with error checking
  FetchFile calls are clean enough now to use any fetching
    tool (instead of just fetch). (portability)
  InstallPackage &amp; InstallPort report better
  Install(User|Group) use get_*_nam functions
  ConfigQmail asks for SQL password instead of writing
    default value to $qmail/control/sql
  InstallEzmlm doesn't overwrite preinstalled config files
  Install stuff into $httpdir/data/mail if it exists
  Moved lots of redundant code from subs into SourceWarning
  Moved Personal Preferences to the top of the script</pre>
<p>
</p>
<hr />
<h1><a name="2_5__02_07_2003">2.5 - 02.07.2003</a></h1>
<pre>
  Updated qmailadmin to 1.0.9
  Updated vpopmail to 5.3.16
  Updated toaster_setup.pl script to 1.7
  Dynamically configure qmailadmin based on answers to
    a series of questions. Now you're not necessarily
    stuck with my choices. :)
  Added install_vpopmail subroutine with lots of
    questions for user customizability
  Added read_file and write_file subs
  Made sure apache doesn't compile using old sources
  Added squirrelmail install
  Added cvsup (auto install, configure, and run).
  Added yes_or_no subroutine
  Added find_the_bin subroutine to make script more
    self configuring and more portable.
  Updated a bunch of system calls (rm, mv, and ln)
    to use perl functions for increased portability.
  Added socklog install function
  Added filtering section
  Made install section cleaner and prettier
  Added Apache install section
  Added defines: $toaster, $httpdir, $confdir
  Added Mysqltool install section
  Added qmailadmin install section
  Added sqwebmail install section
  Added courier imap build section
  Added check for stale ports tree
  Disable the $local/rc.d/qmail.sh file that is installed
  Fixed permission of $qmailcontrol/bin/servercert.pem
  Moved all $fetch calls into sub fetch_files
  Made the supervise directory creation much more robust
  Added more error checking and feedback to install_qmail
  Added install of ucspi-tcp to script
  Added better checks for user and group entries</pre>
<pre>
  Updated qmailadmin with MySQL replication and quota fixes
  updated sqwebmail instructions, version to 3.3.7
  Updated qmail patch (2.3) to use newer smtp-auth 0.31
  Removed badmailfrom and badrcptto patches from qmail
  Updated toaster_setup.pl script to v1.4</pre>
<pre>
  Made the qmail binary install honor the $qmaildir
  Updated to smtp_run-1.1 (qmail-smtpd uid is now vpopmail)
  Owner of /var/qmail/control/sql needs to be vpopmail</pre>
<p>
</p>
<hr />
<h1><a name="2_2__updated_qmail__vpopmail__qmailadmin_">2.2 - Updated qmail, vpopmail, qmailadmin.</a></h1>
<pre>

  cgi-bin dir changed to more normal location of cgi-bin.
  qmailadmin 1.0.6 - with quota support which I hacked in
  Vpopmail 5.3.5 - smth-auth works. :-) .
  patch - added qmailqueue &amp; qpop3d maildir++ quota patches
  qmailqueue - Added qmailqueue support to my toaster patch
  toaster_setup.pl - moved a bunch more of the config
    and install steps into the script</pre>
<p>
</p>
<hr />
<h1><a name="2_1__updated_autoresponder__vpopmail__qmailadmin__and_courierimap_">2.1 - Updated autoresponder, Vpopmail, qmailadmin, and courier-imap.</a></h1>
<p>Autoresponder is now installed from ports instead of as a package. As of 2/21/02 if you update your ports tree and install, you'll get version 2.02.</p>
<p>Vpopmail is updated from 5.0 to 5.2. You can simply install 5.2 right over top of 5.0 with no consequence.</p>
<p>Qmailadmin is updated from 1.0 to 1.02. Just install right over the old one.</p>
<p>Courier-IMAP is updated from 1.3.12 to 1.4.2.  Adds quota support. Note the additional configuration steps in the courier install section of the toaster recipe.</p>
<p>
</p>
<hr />
<h1><a name="2_0__latest_versions_of_all_programs__everything_works__fun_changes_">2.0 - Latest versions of all programs, everything works, fun changes.</a></h1>
<pre>
  Added TLS support to qmail-smtpd
  Updated smtp control file accordingly.
  Vpopmail updated to version 5.0
  Courier-IMAP updated to 1.3.12
  Sqwebmail updated to 3.2
  Updated ucspi-tcp patch to include rss patch to rblsmtpd</pre>
<p>Updated my qmail-toaster patch to use SMTP-AUTH 0.30 from <a href="http://members.elysium.pl/brush/qmail-smtpd-auth/">http://members.elysium.pl/brush/qmail-smtpd-auth/</a></p>
<p>Changed Apache build to statically include mod_ssl, mod_php, &amp; mod_perl. Mod perl fails when loaded dynamically and after toiling for many hours, I gave up and compiled it statically. I learned many others before me had gone down that road and failed as well.</p>
<p>
</p>
<hr />
<h1><a name="1_7">1.7</a></h1>
<p>MySQL authentication, SMTP tarpitting, &amp; SMTP-AUTH support.</p>
<p>
</p>
<hr />
<h1><a name="1_6">1.6</a></h1>
<p>SMTP relay table is entirely contained in a MySQL table. Previously the tcp.smtp.cdb file was still generated based upon the contents of a MySQL table. We have modified the tcpserver application to check a MySQL table (instead of a flat file) for each SMTP session to determine if a user's IP can relay or not. If the database connection fails, we allow the SMTP session anyway but don't allow relaying. Invoke tcpserver with the -S flag to utilize the new feature.
</p>

</body>

</html>
