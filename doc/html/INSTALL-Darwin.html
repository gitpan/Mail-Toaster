<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Mail::Toaster Install Darwin</title>
<link rev="made" href="mailto:root@hampsten.nonet" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#step_1__make_perl_happy_">Step 1: Make Perl happy.</a></li>
	<li><a href="#step_2__install_darwin_ports">Step 2: Install Darwin Ports</a></li>
	<li><a href="#step_3__install_mail__toaster">Step 3: Install Mail::Toaster</a></li>
	<li><a href="#step_4__edit_config_files">Step 4: Edit config files</a></li>
	<li><a href="#step_4__start_building_the_toaster_">Step 4: Start building the toaster!</a></li>
	<li><a href="#step_5__install_qmail">Step 5: Install Qmail</a></li>
	<li><a href="#step_6__install_web_pop3_imap_servers">Step 6: Install Web/POP3/IMAP servers</a></li>
	<li><a href="#step_7__configure_courierimap">Step 7: Configure Courier-IMAP</a></li>
	<li><a href="#step_8__set_up_mail_filtering_and_logging">Step 8: Set up mail filtering and logging</a></li>
	<li><a href="#step_9__add_cron_entries">Step 9: Add cron entries</a></li>
	<li><a href="#step_10__continue_with_configuration_">Step 10: Continue with Configuration.</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="step_1__make_perl_happy_">Step 1: Make Perl happy.</a></h1>
<p>You need Perl's CPAN working for installing perl modules so make sure it's configured. If the following command doesn't give you a prompt, then you'll be prompted to configure.</p>
<pre>
  sudo perl -MCPAN -e shell
  exit</pre>
<p>
</p>
<hr />
<h1><a name="step_2__install_darwin_ports">Step 2: Install Darwin Ports</a></h1>
<p>Follow the directions at this URL:  <a href="http://darwinports.opendarwin.org/getdp/">http://darwinports.opendarwin.org/getdp/</a></p>
<p>
</p>
<hr />
<h1><a name="step_3__install_mail__toaster">Step 3: Install Mail::Toaster</a></h1>
<p><a href="http://www.tnpi.biz/internet/mail/toaster/Mail-Toaster.tar.gz">http://www.tnpi.biz/internet/mail/toaster/Mail-Toaster.tar.gz</a></p>
<pre>
   perl Makefile.PL
   make install
   make newconf (overwrites installed .conf files)
   make cgi</pre>
<p>Documentation for the modules being called by toaster_setup.pl, toaster_watcher.pl, maillogs, and index.cgi are all installed in Perl's pod format (perldoc Mail::Toaster) as well as being available online at <a href="http://www.tnpi.biz/internet/mail/toaster/docs/.">http://www.tnpi.biz/internet/mail/toaster/docs/.</a></p>
<p>You will likely get prompted to install a few missing perl modules such as DBI and DBD::mysql. When prompted, choose no. The modules will get installed later.</p>
<p>
</p>
<hr />
<h1><a name="step_4__edit_config_files">Step 4: Edit config files</a></h1>
<pre>
   vi /usr/local/etc/toaster.conf
   vi /usr/local/etc/toaster-watcher.conf</pre>
<p>Edit to suit your preferences. Use 'perldoc toaster.conf' or 'perldoc toaster-watcher.conf' to read the man pages describing what all them settings are for.</p>
<p>
</p>
<hr />
<h1><a name="step_4__start_building_the_toaster_">Step 4: Start building the toaster!</a></h1>
<pre>
   rehash
   toaster_setup.pl -s pre
   toaster_setup.pl -s ports
   toaster_setup.pl -s mattbundle
   toaster_setup.pl -s mysql
   toaster_setup.pl -s phpmyadmin (not complete)
   toaster_setup.pl -s ucspi      (not complete)
   toaster_setup.pl -s ezmlm      (not complete)
   toaster_setup.pl -s vpopmail
   toaster_setup.pl -s qmailadmin (not complete)</pre>
<p>If toaster_setup.pl has any problems running, fix what it complains about and then run it again with the same parameter. It will resume and finish that section.</p>
<p>If you want something installed ``your'' way, install it first. Toaster_setup.pl will detect it (assuming it's registered in the package database) and skip that portion of the install.</p>
<p>You'll need to enable mod_php in /etc/httpd/httpd.conf as it's required by squirrelmail and QSS.</p>
<p>
</p>
<hr />
<h1><a name="step_5__install_qmail">Step 5: Install Qmail</a></h1>
<pre>
   toaster_setup.pl -s qmail</pre>
<p>patch info: <a href="http://www.tnpi.biz/internet/mail/toaster/patches/">http://www.tnpi.biz/internet/mail/toaster/patches/</a></p>
<p>
</p>
<hr />
<h1><a name="step_6__install_web_pop3_imap_servers">Step 6: Install Web/POP3/IMAP servers</a></h1>
<pre>
   toaster_setup.pl -s courier    (not completed)
   toaster_setup.pl -s sqwebmail  (not completed)
   toaster_setup.pl -s squirrelmail (not completed)</pre>
<p>
</p>
<hr />
<h1><a name="step_7__configure_courierimap">Step 7: Configure Courier-IMAP</a></h1>
<pre>
   cd /usr/local/etc/courier-imap
   vi pop3d.cnf imapd.cnf quotawarnmsg</pre>
<pre>
   cd /usr/local/share/courier-imap
   ./mkimapdcert; ./mkpop3dcert</pre>
<p>
</p>
<hr />
<h1><a name="step_8__set_up_mail_filtering_and_logging">Step 8: Set up mail filtering and logging</a></h1>
<pre>
   toaster_setup.pl -s filter  (not completed)</pre>
<p>You can safely skip this step. However, all the spiffy anti-virus and spam detection software will not work. If this is your first mail toaster, you may even want to skip this step, get everything working to your satisfaction and then add in the mail filtering.  It can be daunting for the faint of heart.</p>
<pre>
   toaster_setup.pl -s maillogs
   toaster_setup.pl -s supervise
   toaster_setup.pl -s rrdutil (optional)</pre>
<p>
</p>
<hr />
<h1><a name="step_9__add_cron_entries">Step 9: Add cron entries</a></h1>
<p>Run all these commands from the command line and verify their proper functionality (no complaints or errors) BEFORE adding to cron.</p>
<pre>
 crontab -u root -e 
 9-59/10 * * * * /usr/local/vpopmail/bin/clearopensmtp
 40  * * * *  /usr/local/share/sqwebmail/cleancache.pl
 */5 * * * * /usr/local/sbin/toaster-watcher.pl
 */5 * * * * /usr/local/www/cgi-bin/rrdutil.cgi -a update</pre>
<p>
</p>
<hr />
<h1><a name="step_10__continue_with_configuration_">Step 10: Continue with Configuration.</a></h1>
<p>Visit this URL: <a href="http://www.tnpi.biz/internet/mail/toaster/config.shtml">http://www.tnpi.biz/internet/mail/toaster/config.shtml</a> Skipping this step is guaranteed to make you less than pleased with your toaster.</p>
<p>See <a href="http://mail.cadillac.net/">http://mail.cadillac.net/</a> for an example of index.cgi.</p>

</body>

</html>
