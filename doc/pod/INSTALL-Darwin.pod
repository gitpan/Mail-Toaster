
#
# $Id: INSTALL-Darwin.pod,v 4.0 2004/11/16 20:57:31 matt Exp $
#

=head1 Step 1: Make Perl happy.

You need Perl's CPAN working for installing perl modules so make sure it's configured. If the following command doesn't give you a prompt, then you'll be prompted to configure.

  sudo perl -MCPAN -e shell
  exit

=head1 Step 2: Install Darwin Ports

Follow the directions at this URL:  http://darwinports.opendarwin.org/getdp/


=head1 Step 3: Install Mail::Toaster

http://www.tnpi.biz/internet/mail/toaster/Mail-Toaster.tar.gz

   perl Makefile.PL
   make install
   make newconf (overwrites installed .conf files)
   make cgi

Documentation for the modules being called by toaster_setup.pl, toaster_watcher.pl, maillogs, and index.cgi are all installed in Perl's pod format (perldoc Mail::Toaster) as well as being available online at http://www.tnpi.biz/internet/mail/toaster/docs/.

You will likely get prompted to install a few missing perl modules such as DBI and DBD::mysql. When prompted, choose no. The modules will get installed later.


=head1 Step 4: Edit config files

   vi /usr/local/etc/toaster.conf
   vi /usr/local/etc/toaster-watcher.conf

Edit to suit your preferences. Use 'perldoc toaster.conf' or 'perldoc toaster-watcher.conf' to read the man pages describing what all them settings are for.

=head1 Step 4: Start building the toaster!

   rehash
   toaster_setup.pl -s pre
   toaster_setup.pl -s ports
   toaster_setup.pl -s mattbundle
   toaster_setup.pl -s mysql
   toaster_setup.pl -s phpmyadmin (not complete)
   toaster_setup.pl -s ucspi      (not complete)
   toaster_setup.pl -s ezmlm      (not complete)
   toaster_setup.pl -s vpopmail
   toaster_setup.pl -s qmailadmin (not complete)

If toaster_setup.pl has any problems running, fix what it complains about and then run it again with the same parameter. It will resume and finish that section. 

If you want something installed "your" way, install it first. Toaster_setup.pl will detect it (assuming it's registered in the package database) and skip that portion of the install.

You'll need to enable mod_php in /etc/httpd/httpd.conf as it's required by squirrelmail and QSS.

=head1 Step 5: Install Qmail

   toaster_setup.pl -s qmail

patch info: http://www.tnpi.biz/internet/mail/toaster/patches/

=head1 Step 6: Install Web/POP3/IMAP servers

   toaster_setup.pl -s courier    (not completed)
   toaster_setup.pl -s sqwebmail  (not completed)
   toaster_setup.pl -s squirrelmail (not completed)

=head1 Step 7: Configure Courier-IMAP

   cd /usr/local/etc/courier-imap
   vi pop3d.cnf imapd.cnf quotawarnmsg

   cd /usr/local/share/courier-imap
   ./mkimapdcert; ./mkpop3dcert


=head1 Step 8: Set up mail filtering and logging

   toaster_setup.pl -s filter  (not completed)

You can safely skip this step. However, all the spiffy anti-virus and spam detection software will not work. If this is your first mail toaster, you may even want to skip this step, get everything working to your satisfaction and then add in the mail filtering.  It can be daunting for the faint of heart. 

   toaster_setup.pl -s maillogs
   toaster_setup.pl -s supervise
   toaster_setup.pl -s rrdutil (optional)


=head1 Step 9: Add cron entries

Run all these commands from the command line and verify their proper functionality (no complaints or errors) BEFORE adding to cron.

 crontab -u root -e 
 9-59/10 * * * * /usr/local/vpopmail/bin/clearopensmtp
 40  * * * *  /usr/local/share/sqwebmail/cleancache.pl
 */5 * * * * /usr/local/sbin/toaster-watcher.pl
 */5 * * * * /usr/local/www/cgi-bin/rrdutil.cgi -a update


=head1 Step 10: Continue with Configuration.

Visit this URL: http://www.tnpi.biz/internet/mail/toaster/config.shtml Skipping this step is guaranteed to make you less than pleased with your toaster.

See http://mail.cadillac.net/ for an example of index.cgi. 

=cut
